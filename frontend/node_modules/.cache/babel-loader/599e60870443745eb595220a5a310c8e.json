{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u5927\\u4E09\\u4E0A\\\\\\u533A\\u5757\\u94FE\\\\\\u5927\\u4F5C\\u4E1A\\\\NFT-Characters-Auction-main\\\\NFT-Characters-Auction-main\\\\frontend\\\\src\\\\pages\\\\Login\\\\Help.jsx\";\nimport React, { Component } from 'react';\nimport CardExampleCard from './ui';\nimport { Card, Button, Layout, Col, Row, List } from 'antd';\nimport { FormOutlined, DollarCircleOutlined, SketchOutlined, QuestionCircleOutlined, LeftOutlined } from '@ant-design/icons';\nimport Background from './123.jpeg';\nimport { Link } from 'react-router-dom';\nimport { Color } from '@antv/attr';\nimport { toInteger } from '@antv/util';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\n\nlet web3 = require('./web3');\n\nlet lotteryInstance = require('./eth');\n\nconst {\n  Content\n} = Layout;\nconst data = [{\n  title: 'Title 1'\n}, {\n  title: 'Title 2'\n}, {\n  title: 'Title 3'\n}, {\n  title: 'Title 4'\n}, {\n  title: 'Title 5'\n}, {\n  title: 'Title 6'\n}];\n\nfor (let i = 0; i < 23; i++) {\n  data.push({\n    title: 'Title' + i\n  });\n}\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.play = async () => {\n      console.log('play Button click'); //1.调用合约方法\n      //2.转钱1ETH\n\n      this.setState({\n        isClicked: true\n      });\n      let accounts = await web3.eth.getAccounts();\n\n      try {\n        await lotteryInstance.methods.play().send({\n          from: accounts[0],\n          value: web3.utils.toWei('0.1', 'ether'),\n          gas: '3000000'\n        });\n        window.location.reload();\n        this.setState({\n          isClicked: false\n        });\n        alert('投注成功');\n      } catch (e) {\n        console.log(e);\n        this.setState({\n          isClicked: false\n        });\n        alert('投注失败');\n      }\n    };\n\n    this.draw = async () => {\n      console.log('kaijiang Button click'); //1.调用合约方法\n      //2.转钱1ETH\n\n      this.setState({\n        isClicked: true\n      });\n      let accounts = await web3.eth.getAccounts();\n\n      try {\n        await lotteryInstance.methods.draw().send({\n          from: accounts[0],\n          // value: web3.utils.toWei('1', 'ether'),\n          gas: '3000000'\n        }); //显示中奖人\n\n        let winner = await lotteryInstance.methods.winner().call();\n        window.location.reload();\n        this.setState({\n          isClicked: false\n        });\n        alert(`开奖成功!\\n中奖人: ${winner}`);\n      } catch (e) {\n        console.log(e);\n        this.setState({\n          isClicked: false\n        });\n        alert('开奖失败');\n      }\n    };\n\n    this.refund = async () => {\n      console.log('tuijiang Button click'); //1.调用合约方法\n      //2.转钱1ETH\n\n      this.setState({\n        isClicked: true\n      });\n      let accounts = await web3.eth.getAccounts();\n\n      try {\n        await lotteryInstance.methods.refund().send({\n          from: accounts[0],\n          // value: web3.utils.toWei('1', 'ether'),\n          gas: '3000000'\n        });\n        window.location.reload();\n        this.setState({\n          isClicked: false\n        });\n        alert('退奖成功');\n      } catch (e) {\n        console.log(e);\n        this.setState({\n          isClicked: false\n        });\n        alert('退奖失败');\n      }\n    };\n\n    this.oc = () => {\n      console.log(\"click\");\n    };\n\n    this.helpFunction = () => {\n      let manager = this.state.manager.toLowerCase();\n      window.ethereum.on('accountsChanged', accounts => {\n        if (accounts[0]) {\n          let isShowButton = accounts[0].toLowerCase() === manager ? 'inline' : 'none';\n          this.setState({\n            currentAccount: accounts[0],\n            isShowButton: isShowButton\n          });\n        }\n      });\n    };\n\n    this.state = {\n      disabled: true,\n      manager: '',\n      round: '',\n      winner: '',\n      playerCounts: 0,\n      balance: 0,\n      players: [],\n      currentAccount: '',\n      isClicked: false,\n      isShowButton: ''\n    };\n  }\n\n  componentDidMount() {}\n\n  async componentWillMount() {\n    //获取当前的所有地址\n    let accounts = await web3.eth.getAccounts();\n\n    if (accounts.length != 0) {\n      console.log(accounts.length);\n      this.state.disabled = false;\n    } // let manager = await lotteryInstance.methods.manager().call()\n    // console.log(12)\n    // let winner = await lotteryInstance.methods.winner().call()\n    // let round = await lotteryInstance.methods.round().call()\n    // let playerCounts = await lotteryInstance.methods.getPlayersCount().call()\n    // //单位是wei，需要转换为eth单位\n    // let balanceWei = await lotteryInstance.methods.getBalance().call()\n    // //从wei单位转换为eth\n    // let balance = web3.utils.fromWei(balanceWei, 'ether')\n    // let players = await lotteryInstance.methods.getPlayers().call()\n    // //是否显示管理员按钮\n    // let isShowButton = accounts[0] === manager ? 'inline' : 'none'\n    // console.log(playerCounts)\n    // this.setState({\n    //     // manager: manager,\n    //     manager,\n    //     round,\n    //     winner,\n    //     playerCounts,\n    //     balance,\n    //     players,\n    //     currentAccount: accounts[0],\n    //     isClicked: false,\n    //     isShowButton\n    // })\n\n  }\n\n  render() {\n    // this.helpFunction()\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-content-wrap2\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"What is NFT Characters?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-content-wrap3\",\n        style: {},\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginLeft: 20,\n            marginTop: 10\n          },\n          shape: \"round\",\n          ghost: true,\n          type: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: {\n              pathname: \"/List\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 29\n            }, this), \"Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-content-wraphelp\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"NFT, fully known as non fungible token, refers to non homogenous token, which is the only cryptocurrency token used to represent digital assets (including JPG and video clip forms). NFT can be bought and sold, just like tangible assets.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["E:/大三上/区块链/大作业/NFT-Characters-Auction-main/NFT-Characters-Auction-main/frontend/src/pages/Login/Help.jsx"],"names":["React","Component","CardExampleCard","Card","Button","Layout","Col","Row","List","FormOutlined","DollarCircleOutlined","SketchOutlined","QuestionCircleOutlined","LeftOutlined","Background","Link","Color","toInteger","Meta","web3","require","lotteryInstance","Content","data","title","i","push","App","constructor","play","console","log","setState","isClicked","accounts","eth","getAccounts","methods","send","from","value","utils","toWei","gas","window","location","reload","alert","e","draw","winner","call","refund","oc","helpFunction","manager","state","toLowerCase","ethereum","on","isShowButton","currentAccount","disabled","round","playerCounts","balance","players","componentDidMount","componentWillMount","length","render","textAlign","marginLeft","marginTop","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport CardExampleCard from './ui'\r\nimport {Card, Button,Layout,Col,Row , List} from 'antd'\r\nimport {FormOutlined, DollarCircleOutlined, SketchOutlined,QuestionCircleOutlined ,LeftOutlined} from '@ant-design/icons'\r\nimport Background from './123.jpeg';\r\nimport {Link} from 'react-router-dom'\r\nimport { Color } from '@antv/attr';\r\nimport { toInteger } from '@antv/util';\r\nconst {Meta} = Card\r\nlet web3 = require('./web3');\r\nlet lotteryInstance = require('./eth')\r\nconst {Content } = Layout\r\n\r\nconst data = [\r\n    {\r\n      title: 'Title 1',\r\n    },\r\n    {\r\n      title: 'Title 2',\r\n    },\r\n    {\r\n      title: 'Title 3',\r\n    },\r\n    {\r\n      title: 'Title 4',\r\n    },\r\n    {\r\n      title: 'Title 5',\r\n    },\r\n    {\r\n      title: 'Title 6',\r\n    },\r\n  ];\r\n  for (let i = 0; i < 23; i++) {\r\n    data.push({\r\n        \r\n        title: 'Title'+i,\r\n        \r\n      });\r\n  }\r\nclass App extends Component {\r\n\r\n    play = async () => {\r\n        console.log('play Button click')\r\n        //1.调用合约方法\r\n        //2.转钱1ETH\r\n        this.setState({ isClicked: true })\r\n        let accounts = await web3.eth.getAccounts()\r\n        try {\r\n            await lotteryInstance.methods.play().send({\r\n                from: accounts[0],\r\n                value: web3.utils.toWei('0.1', 'ether'),\r\n                gas: '3000000',\r\n            })\r\n            window.location.reload()\r\n            this.setState({ isClicked: false })\r\n            alert('投注成功')\r\n        } catch (e) {\r\n            console.log(e)\r\n            this.setState({ isClicked: false })\r\n            alert('投注失败')\r\n        }\r\n    }\r\n    draw = async () => {\r\n        console.log('kaijiang Button click')\r\n        //1.调用合约方法\r\n        //2.转钱1ETH\r\n        this.setState({ isClicked: true })\r\n        let accounts = await web3.eth.getAccounts()\r\n        try {\r\n            await lotteryInstance.methods.draw().send({\r\n                from: accounts[0],\r\n                // value: web3.utils.toWei('1', 'ether'),\r\n                gas: '3000000',\r\n            })\r\n            //显示中奖人\r\n            let winner = await lotteryInstance.methods.winner().call()\r\n            window.location.reload()\r\n            this.setState({ isClicked: false })\r\n            alert(`开奖成功!\\n中奖人: ${winner}`)\r\n        } catch (e) {\r\n            console.log(e)\r\n            this.setState({ isClicked: false })\r\n            alert('开奖失败')\r\n        }\r\n    }\r\n    refund = async () => {\r\n        console.log('tuijiang Button click')\r\n        //1.调用合约方法\r\n        //2.转钱1ETH\r\n        this.setState({ isClicked: true })\r\n        let accounts = await web3.eth.getAccounts()\r\n        try {\r\n            await lotteryInstance.methods.refund().send({\r\n                from: accounts[0],\r\n                // value: web3.utils.toWei('1', 'ether'),\r\n                gas: '3000000',\r\n            })\r\n            window.location.reload()\r\n            this.setState({ isClicked: false })\r\n            alert('退奖成功')\r\n        } catch (e) {\r\n            console.log(e)\r\n            this.setState({ isClicked: false })\r\n            alert('退奖失败')\r\n        }\r\n    }\r\n    oc = () =>{\r\n        console.log(\"click\")\r\n    }\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            disabled:true,\r\n            manager: '',\r\n            round: '',\r\n            winner: '',\r\n            playerCounts: 0,\r\n            balance: 0,\r\n            players: [],\r\n            currentAccount: '',\r\n            isClicked: false,\r\n            isShowButton: '',\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    async componentWillMount() {\r\n        \r\n        //获取当前的所有地址\r\n        let accounts = await web3.eth.getAccounts()\r\n\r\n        if(accounts.length!=0){\r\n            console.log(accounts.length)\r\n            this.state.disabled=false;\r\n        }\r\n        // let manager = await lotteryInstance.methods.manager().call()\r\n        // console.log(12)\r\n        // let winner = await lotteryInstance.methods.winner().call()\r\n        // let round = await lotteryInstance.methods.round().call()\r\n        // let playerCounts = await lotteryInstance.methods.getPlayersCount().call()\r\n        // //单位是wei，需要转换为eth单位\r\n        // let balanceWei = await lotteryInstance.methods.getBalance().call()\r\n        // //从wei单位转换为eth\r\n        // let balance = web3.utils.fromWei(balanceWei, 'ether')\r\n        // let players = await lotteryInstance.methods.getPlayers().call()\r\n        // //是否显示管理员按钮\r\n        // let isShowButton = accounts[0] === manager ? 'inline' : 'none'\r\n        // console.log(playerCounts)\r\n        // this.setState({\r\n        //     // manager: manager,\r\n        //     manager,\r\n        //     round,\r\n        //     winner,\r\n        //     playerCounts,\r\n        //     balance,\r\n        //     players,\r\n        //     currentAccount: accounts[0],\r\n        //     isClicked: false,\r\n        //     isShowButton\r\n        // })\r\n    }\r\n\r\n    helpFunction = () => {\r\n        let manager = this.state.manager.toLowerCase()\r\n        window.ethereum.on('accountsChanged', (accounts) => {\r\n            if (accounts[0]) {\r\n                let isShowButton = accounts[0].toLowerCase() === manager ? 'inline' : 'none'\r\n                this.setState({ currentAccount: accounts[0], isShowButton: isShowButton })\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        // this.helpFunction()\r\n        return (\r\n            \r\n            <div className=\"login2\">\r\n                \r\n                <div className=\"login-content-wrap2\">\r\n                    <br/><br/><h1 style={{textAlign:\"center\"}} >What is NFT Characters?</h1>\r\n                    \r\n                </div>\r\n                <div className=\"login-content-wrap3\" style={{}}>\r\n                    \r\n                    <Button style={{marginLeft: 20, marginTop:10}} shape=\"round\" ghost type=\"primary\">\r\n                        <Link to={{pathname:\"/List\"}}>\r\n                            <LeftOutlined />Back\r\n                        </Link>    \r\n                    </Button>\r\n                </div>\r\n\r\n                <div className=\"login-content-wraphelp\">\r\n                    <br/>\r\n                    <h2>\r\n                    NFT, fully known as non fungible token, refers to non homogenous token, which is the only cryptocurrency token used to represent digital assets (including JPG and video clip forms). NFT can be bought and sold, just like tangible assets.\r\n                    </h2>\r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}